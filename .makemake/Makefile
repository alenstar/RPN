# This file was automatically generated by makemake.rb.
# Any changes you make to this file will be overwritten
# whenever makemake is run.

catcher:
	$(error "Submake invoked without valid target.")

ERB  := ruby .makemake/erb.rb
MOC  := moc-qt4
RUBY := ruby

include .makemake/user.mk
include $(shell find dep -name '*.d')

build: libs bins chks

libs: RPN
bins: test bin
chks: 

RPN: build/$(BUILD)/libRPN.a build/$(BUILD)/RPN.h build/$(BUILD)/libRPN.so.0.1 
build/$(BUILD)/libRPN.a: build/$(BUILD)/RPN/node.o build/$(BUILD)/RPN/nodes/comma.o build/$(BUILD)/RPN/nodes/operators/multiplication.o build/$(BUILD)/RPN/nodes/operators/division.o build/$(BUILD)/RPN/nodes/operators/subtraction.o build/$(BUILD)/RPN/nodes/operators/exponentiation.o build/$(BUILD)/RPN/nodes/operators/modulo.o build/$(BUILD)/RPN/nodes/operators/factorial.o build/$(BUILD)/RPN/nodes/operators/addition.o build/$(BUILD)/RPN/nodes/operators/negation.o build/$(BUILD)/RPN/nodes/functions/maximum.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/cosine.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arccotangent.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arccosecant.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/tangent.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/sine.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arccosine.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arcsine.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arctangent.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/cosecant.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/secant.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/cotangent.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arcsecant.o build/$(BUILD)/RPN/nodes/functions/trigonometry/cosine.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arccotangent.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arccosecant.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arctangent2.o build/$(BUILD)/RPN/nodes/functions/trigonometry/tangent.o build/$(BUILD)/RPN/nodes/functions/trigonometry/sine.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arccosine.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arcsine.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arctangent.o build/$(BUILD)/RPN/nodes/functions/trigonometry/cosecant.o build/$(BUILD)/RPN/nodes/functions/trigonometry/secant.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arccotangent2.o build/$(BUILD)/RPN/nodes/functions/trigonometry/cotangent.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arcsecant.o build/$(BUILD)/RPN/nodes/functions/exponentials/root.o build/$(BUILD)/RPN/nodes/functions/exponentials/squareroot.o build/$(BUILD)/RPN/nodes/functions/exponentials/binarylogarithm.o build/$(BUILD)/RPN/nodes/functions/exponentials/logarithm.o build/$(BUILD)/RPN/nodes/functions/exponentials/decadiclogarithm.o build/$(BUILD)/RPN/nodes/functions/exponentials/power.o build/$(BUILD)/RPN/nodes/functions/exponentials/naturallogarithm.o build/$(BUILD)/RPN/nodes/functions/exponentials/exponential.o build/$(BUILD)/RPN/nodes/functions/absolutevalue.o build/$(BUILD)/RPN/nodes/functions/minimum.o build/$(BUILD)/RPN/nodes/values/variable.o build/$(BUILD)/RPN/nodes/values/constant.o build/$(BUILD)/RPN/nodes/values/argument.o build/$(BUILD)/RPN/nodes/bracket.o build/$(BUILD)/RPN/nodes/expression.o build/$(BUILD)/RPN/nodes/function.o build/$(BUILD)/RPN/nodes/operator.o build/$(BUILD)/RPN/nodes/brackets/right.o build/$(BUILD)/RPN/nodes/brackets/left.o build/$(BUILD)/RPN/nodes/value.o build/$(BUILD)/RPN/parser.o build/$(BUILD)/RPN/parsers/infix.o build/$(BUILD)/RPN/parsers/postfix.o build/$(BUILD)/RPN/tokens.o build/$(BUILD)/RPN/core.o build/$(BUILD)/RPN/expression.o build/$(BUILD)/RPN/context.o build/$(BUILD)/RPN/exception.o
	${AR} $(ARFLAGS) $@ $?
	ranlib $@
build/$(BUILD)/libRPN.so.0.1: build/$(BUILD)/RPN/node.o build/$(BUILD)/RPN/nodes/comma.o build/$(BUILD)/RPN/nodes/operators/multiplication.o build/$(BUILD)/RPN/nodes/operators/division.o build/$(BUILD)/RPN/nodes/operators/subtraction.o build/$(BUILD)/RPN/nodes/operators/exponentiation.o build/$(BUILD)/RPN/nodes/operators/modulo.o build/$(BUILD)/RPN/nodes/operators/factorial.o build/$(BUILD)/RPN/nodes/operators/addition.o build/$(BUILD)/RPN/nodes/operators/negation.o build/$(BUILD)/RPN/nodes/functions/maximum.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/cosine.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arccotangent.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arccosecant.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/tangent.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/sine.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arccosine.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arcsine.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arctangent.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/cosecant.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/secant.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/cotangent.o build/$(BUILD)/RPN/nodes/functions/hyperbolics/arcsecant.o build/$(BUILD)/RPN/nodes/functions/trigonometry/cosine.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arccotangent.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arccosecant.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arctangent2.o build/$(BUILD)/RPN/nodes/functions/trigonometry/tangent.o build/$(BUILD)/RPN/nodes/functions/trigonometry/sine.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arccosine.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arcsine.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arctangent.o build/$(BUILD)/RPN/nodes/functions/trigonometry/cosecant.o build/$(BUILD)/RPN/nodes/functions/trigonometry/secant.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arccotangent2.o build/$(BUILD)/RPN/nodes/functions/trigonometry/cotangent.o build/$(BUILD)/RPN/nodes/functions/trigonometry/arcsecant.o build/$(BUILD)/RPN/nodes/functions/exponentials/root.o build/$(BUILD)/RPN/nodes/functions/exponentials/squareroot.o build/$(BUILD)/RPN/nodes/functions/exponentials/binarylogarithm.o build/$(BUILD)/RPN/nodes/functions/exponentials/logarithm.o build/$(BUILD)/RPN/nodes/functions/exponentials/decadiclogarithm.o build/$(BUILD)/RPN/nodes/functions/exponentials/power.o build/$(BUILD)/RPN/nodes/functions/exponentials/naturallogarithm.o build/$(BUILD)/RPN/nodes/functions/exponentials/exponential.o build/$(BUILD)/RPN/nodes/functions/absolutevalue.o build/$(BUILD)/RPN/nodes/functions/minimum.o build/$(BUILD)/RPN/nodes/values/variable.o build/$(BUILD)/RPN/nodes/values/constant.o build/$(BUILD)/RPN/nodes/values/argument.o build/$(BUILD)/RPN/nodes/bracket.o build/$(BUILD)/RPN/nodes/expression.o build/$(BUILD)/RPN/nodes/function.o build/$(BUILD)/RPN/nodes/operator.o build/$(BUILD)/RPN/nodes/brackets/right.o build/$(BUILD)/RPN/nodes/brackets/left.o build/$(BUILD)/RPN/nodes/value.o build/$(BUILD)/RPN/parser.o build/$(BUILD)/RPN/parsers/infix.o build/$(BUILD)/RPN/parsers/postfix.o build/$(BUILD)/RPN/tokens.o build/$(BUILD)/RPN/core.o build/$(BUILD)/RPN/expression.o build/$(BUILD)/RPN/context.o build/$(BUILD)/RPN/exception.o
	${CXX} -Wl,-soname,libRPN.so.0 -shared -o $@ $+
	cd build/$(BUILD); ln -Tfs libRPN.so.0.1 libRPN.so.0
	cd build/$(BUILD); ln -Tfs libRPN.so.0.1 libRPN.so


test: build/$(BUILD)/test/expressions.o build/$(BUILD)/test/trig.o build/$(BUILD)/test/ops.o build/$(BUILD)/test/val.o build/$(BUILD)/test/helper.o build/$(BUILD)/test/ooo.o build/$(BUILD)/test/hyperbolics.o build/$(BUILD)/test/main.o build/$(BUILD)/libRPN.a 
	$(LINK.cc) -o $@ $+
bin: build/$(BUILD)/bin/calc.o build/$(BUILD)/libRPN.a 
	$(LINK.cc) -o $@ $+


build/$(BUILD)/%.o: src/%.c
	@mkdir -p dep/$(*D)
	@mkdir -p build/$(BUILD)/$(*D)
	$(COMPILE.c) -MM -MF dep/$*.d $<
	$(COMPILE.c) -o $@ $<

build/$(BUILD)/%.o: src/%.cpp
	@mkdir -p dep/$(*D)
	@mkdir -p build/$(BUILD)/$(*D)
	$(COMPILE.cc) -MM -MF dep/$*.d $<
	$(COMPILE.cc) -o $@ $<

build/$(BUILD)/%.h: src/%/libheader.h
	${CXX} -E -P -DLIBHEADER -o $@ $<

moc_%.cpp: %.h
	${MOC} -o $@ $<
